var GAME=GAME||{};var WIDTH=720,HEIGHT=1280;var xl=310,xlc=334.5,yl=308,xr=408,xA=290;var xd1=128,xd2=592;var getScaleX=function(a){return winWidth*a/WIDTH};var getScaleY=function(a){return winHeight*a/HEIGHT};GAME.children={};GAME.childCount=0;GAME.updateChildren=function(){if(GAME.childCount>0){GAME.context.clearRect(0,0,GAME.canvas.width,GAME.canvas.height);var c=[];for(var a in GAME.children){var d=GAME.children[a];c.push({sprite:d,zorder:d.zorder})}c.sort(function(f,e){return f.zorder>=e.zorder?1:-1});for(var b=0;b<c.length;++b){var d=c[b].sprite;GAME.context.drawImage(d.image,d.pos.x,d.pos.y,d.width*d.scale.x,d.height*d.scale.y)}}};GAME.getDistance=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2),Math.pow(a.y-b.y,2))};GAME.Sprite=function(b,g,f,a,c){for(var e in GAME.Sprite.prototype){this.__proto__[e]=GAME.Sprite.prototype[e]}this.tag=b;this.zorder=c||0;this.src=g;this.width=f;this.height=a;this.anchor={x:0.5,y:0.5};this.pos={x:0,y:0};this.scale={x:1,y:1};this.image=new Image();this.image.src=this.src;var d=this;this.image.onload=function(){GAME.children[b]=d;GAME.childCount++;GAME.updateChildren()}};GAME.Sprite.prototype.removeFromGlobal=function(){if(GAME.children[this.tag]==undefined){console.log("tag:",this.tag,"isnot exists");return}delete GAME.children[this.tag];GAME.childCount--};GAME.Sprite.prototype.setAnchorPoint=function(a,b){if(a>1||a<0||b>1||b<0){console.log("AnchorPoint must between [0, 1]")}this.anchor.x=a;this.anchor.y=b};GAME.Sprite.prototype.setPosition=function(a,b){this.pos.x=a-this.anchor.x*this.width*this.scale.x;this.pos.y=b-this.anchor.y*this.height*this.scale.y};GAME.Sprite.prototype.setPositionX=function(a){this.pos.x=a-this.anchor.x*this.width*this.scale.x};GAME.Sprite.prototype.setPositionY=function(a){this.pos.y=a-this.anchor.y*this.height*this.scale.y};GAME.Sprite.prototype.getPositionX=function(){return this.pos.x+this.anchor.x*this.width*this.scale.x};GAME.Sprite.prototype.getPositionY=function(){return this.pos.y+this.anchor.y*this.height*this.scale.y};GAME.Sprite.prototype.setScale=function(b,a){var d=this.width*(this.scale.x-b)*this.anchor.x;var c=this.height*(this.scale.y-a)*this.anchor.y;this.pos.x+=d;this.pos.y+=c;this.scale.x=b;this.scale.y=a};GAME.Sprite.prototype.getCurrentWidth=function(){return this.width*this.scale.x};GAME.Sprite.prototype.getCurrentHeight=function(){return this.height*this.scale.y};