(function(root,factory){if(typeof define==="function"&&define.amd){define(factory)}else{if(typeof exports==="object"){module.exports=factory()}else{root.resLoader=factory(root)}}}(this,function(){var isFunc=function(f){return typeof f==="function"};function resLoader(config){this.option={resourceType:"image",baseUrl:"./",resources:[],onStart:null,onProgress:null,onComplete:null};if(config){for(i in config){this.option[i]=config[i]}}else{alert("参数错误！");return}this.status=0;this.total=this.option.resources.length||0;this.currentIndex=0}resLoader.prototype.start=function(){this.status=1;var _this=this;var baseUrl=this.option.baseUrl;for(var i=0,l=this.option.resources.length;i<l;i++){var r=this.option.resources[i],url="";if(r.indexOf("http://")===0||r.indexOf("https://")===0){url=r}else{url=baseUrl+r}var image=new Image();image.onload=function(){_this.loaded()};image.onerror=function(){_this.loaded()};image.src=url}if(isFunc(this.option.onStart)){this.option.onStart(this.total)}};resLoader.prototype.loaded=function(){if(isFunc(this.option.onProgress)){this.option.onProgress(++this.currentIndex,this.total)}if(this.currentIndex===this.total){if(isFunc(this.option.onComplete)){this.option.onComplete(this.total)}}};return resLoader}));
var loader = new resLoader({
	resources : [
		'arrow_lr.png',
		'arrow_up.png',
		'avtivity.png',
		'bg.jpg',
		'feibiao0.png',
		'gmf.png',
		'header.png',
		'jiayou_1.png',
		'jiayou_2.png',
		'jiayou_3.png',
		'jiayou_4.png',
		'jiayou_5.png',
		'jiayou_6.png',
		'langan0.png',
		'lanqiu0.png',
		'lanqiu1.png',
		'lanqiu2.png',
		'lanqiu3.png',
		'music_off.png',
		'music_on.png',
		'player0.png',
		'player1.png',
		'player_jump.png',
		'preview.jpg',
		'shadow.png',
		'shou0.png',
		'success.png',
		'zhongdian0.png',
		'zuqiu0.png',
		'zuqiu1.png',
		'zuqiu2.png',
		'zuqiu3.png',
		'images/number/05.png',
		'images/number/10.png',
		'images/number/15.png',
		'images/number/20.png',
		'images/number/25.png',
		'images/number/30.png',
		'images/number/35.png',
		'images/number/40.png',
		'images/number/45.png',
		'images/number/50.png',
		'images/number/55.png',
		'images/number/60.png',
		'images/number/65.png',
		'images/number/70.png',
		'images/number/75.png',
		'images/number/80.png',
		'images/number/85.png',
		'images/number/90.png',
		'images/number/95.png',
		'images/number/100.png'
	],
	onStart : function(total){
		var htmlContent = '<div class="loadingBg"><div class="loadingBox self_center"><div class="rect1"></div>\
	  	<div class="rect2"></div><div class="rect3"></div>\
	  	<div class="rect4"></div><div class="rect5"></div></div></div>';
    	$('body').append(htmlContent);
	},
	onProgress : function(current, total){
		// console.log(current+'/'+total);
		// var percent = current/total*100;
		// $('.progressbar').css('width', percent+'%');
		// $('.progresstext .current').text(current);
		// $('.progresstext .total').text(total);
	},
	onComplete : function(total){
		$('.loadingBg').remove();
	}
});
loader.start();